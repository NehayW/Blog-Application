{% extends "base.html"%}
{% load static %}
{% block content %}

<div class="container mt-4">
	<div class="row">
		<div class="col-md-4 col-md-offset-4">
            <div class="card" >
            <div class="panel panel-default">
              <div class="panel-body">
                <div class="text-center">
                  <h3><i class="fa fa-lock fa-4x"></i></h3>
                  <h2 class="text-center">Create Password </h2>
                  <div class="panel-body">
                    <form action="{% url 'create-password' %}" id="create-password-form" role="form" autocomplete="off" class="form" method="post">
                        {% csrf_token %}
                        <div class="form-group mt-3">
                            <div class="input-group">
                              <input id="otp" name="otp" placeholder="Enter OTP" class="form-control" required  type="number" pattern="/^-?\d+\.?\d*$/" onKeyPress="if(this.value.length==6) return false;">
                              <input type="hidden" name="key" value="{{ key }}" >
                              <input type="hidden" name="email" value="{{ email }}">
                            </div>
                        </div>
                      <div class="form-group">
                        <div class="input-group mt-3">
                          <input id="password" required name="password" minlength="8"  class="form-control" placeholder="Enter-password" type="password">
                        </div>
                      </div>
                        <div class="form-group mt-3">
                            <div class="input-group">
                              <input id="password1" required name="password1" placeholder="Confirm Password" class="form-control"  type="password" minlength="8">
                            </div>
                        </div>
                      <div class="form-group mt-3 mb-3">
                        <input name="recover-submit" class="btn btn-lg btn-primary btn-block" value="Create Password" type="submit">
                      </div>
                    </form>
                  </div>
                </div>
                </div>
              </div>
            </div>
          </div>
	</div>
</div>

<script>
    $(document).ready(function(){
        $("[name=password1]").on("keyup change", function(){
            var password = $("[name=password]").val()
            var password1 = $("[name=password1]").val()
            if (!(password === password1)){
                $("#match").remove()
                $("<p id='match'> Password dose not match</>").insertAfter($("[name=password1]").parent());
            } else{
                $("#match").remove()
            }

        });
    });
    {% if messages %}
        {% for message in messages %}
        Swal.fire(
        '',
        '{{ message }}',
        '{{ message.tags }}'
        )
        {% endfor %}

    {% endif %}
</script>

{% endblock content %}